---
title: Which Istio metrics and attributes are required by Kiali?
weight: 70
---

To reduce Prometheus storage some users want to customize the metrics generated by Istio.  This can break Kiali if the pruned metrics and/or attributes are used by Kiali in its graph or metric features.

Kiali currently requires the following metrics and attributes (note, this assumes Telemetry V2 in being used):

'''

[cols=".<40%m,.<60%",options="header"]
|===
|Metric
|Notes

|istio_requests_total
|used throughout Kiali and the primary metric for http/grpc traffic graph generation

|istio_request_bytes_sum
|used in metrics displays

|istio_request_duration_milliseconds_bucket
|used throughout Kiali for response time calculation. used by iter8 extension.

|istio_request_duration_milliseconds_sum
|used throughout Kiali for response time calculation. used by iter8 extension.

|istio_response_bytes_sum
|used in metrics displays

|istio_tcp_received_bytes_total
|used in metrics displays

|istio_tcp_sent_bytes_total
|used throughout Kiali and the primary metric for tcp traffic graph generation

|===

{nbsp} +

[cols=".<30%m,.<40%m,.<30%",options="header"]
|===
|Attribute
|Metrics
|Notes

|connection_security_policy
|istio_requests_total
|used only when graph Security display option is enabled

|destination_canonical_revision
|
istio_requests_total
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_tcp_sent_bytes_total
|

|destination_canonical_service
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|

|destination_principal
|
istio_requests_total
istio_tcp_sent_bytes_total
|used only when graph Security display option is enabled

| destination_service
| istio_requests_total
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_tcp_sent_bytes_total
|

|destination_service_name
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|

| destination_service_namespace
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|

|destination_workload
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|

|destination_workload_namespace
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|

|grpc_response_status
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
| used only when request_protocol="grpc"

|job
|
istio_request_duration_milliseconds_sum
| used only by iter8 extension

|reporter
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|both "source" and "destination" metrics are used by Kiali

|request_operation
|
istio_requests_total
istio_request_bytes_sum
istio_response_bytes_sum
|used only when request classification is configured. "request_operation" is the default attribute, it is configurable.

|request_protocol
|
istio_requests_total
istio_request_bytes_sum
istio_response_bytes_sum
|

|response_code
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
|

|response_flags
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
| 

|source_canonical_revision
|
istio_requests_total
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_tcp_sent_bytes_total
|

|source_canonical_service
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|

|source_principal
|
istio_requests_total
istio_tcp_sent_bytes_total
|used only when graph Security display option is enabled

|source_workload
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|

|source_workload_namespace
|
istio_requests_total
istio_request_bytes_sum
istio_request_duration_milliseconds_bucket
istio_request_duration_milliseconds_sum
istio_response_bytes_sum
istio_tcp_received_bytes_total
istio_tcp_sent_bytes_total
|

|===

