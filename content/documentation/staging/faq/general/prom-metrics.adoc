---
title: Which Istio metrics and attributes are required by Kiali?
weight: 70
---

To reduce Prometheus storage some users want to customize the metrics generated by Istio.  This can break Kiali if the pruned metrics and/or attributes are used by Kiali in its graph or metric features.

Kiali currently requires the following metrics and attributes (note, this assumes Telemetry V2 in being used):

* istio_requests_total
** connection_security_policy
*** only used when graph security option is enabled
** destination_canonical_revision
** destination_canonical_service
** destination_principal
*** only used when graph security option is enabled
** destination_service
** destination_service_name
** destination_service_namespace
** destination_workload
** destination_workload_namespace
** grpc_response_status
*** only used when request_protocol="grpc"
** request_operation
*** only used when request classification is configured
*** "request_operation" is the default attribute, it is configurable
** request_protocol
** reporter
*** both "source" and "destination" metrics are used by Kiali
** response_code
** response_flags
** source_canonical_revision
** source_canonical_service
** source_principal
*** only used when graph security option is enabled
** source_workload
** source_workload_namespace

* istio_request_bytes_sum
*** only used by metrics
** destination_canonical_service
** destination_service_name
** destination_service_namespace
** destination_workload
** destination_workload_namespace
** grpc_response_status
*** only used when request_protocol="grpc"
** request_operation
*** only used when request classification is configured
*** "request_operation" is the default attribute, it is configurable
** reporter
*** both "source" and "destination" metrics are used by Kiali
** request_protocol
** response_code
** source_canonical_service
** source_workload
** source_workload_namespace

* istio_request_duration_milliseconds_bucket
** destination_canonical_revision
** destination_canonical_service
** destination_service
** destination_service_name
** destination_service_namespace
** destination_workload
** destination_workload_namespace
** grpc_response_status
*** only used when request_protocol="grpc"
** reporter
*** both "source" and "destination" metrics are used by Kiali
** response_code
** source_canonical_revision
** source_canonical_service
** source_workload
** source_workload_namespace


* istio_response_bytes_sum
*** only used by metrics
** destination_canonical_service
** destination_service_name
** destination_service_namespace
** destination_workload
** destination_workload_namespace
** grpc_response_status
*** only used when request_protocol="grpc"
** request_operation
*** only used when request classification is configured
*** "request_operation" is the default attribute, it is configurable
** reporter
*** both "source" and "destination" metrics are used by Kiali
** request_protocol
** response_code
** source_canonical_service
** source_workload
** source_workload_namespace

* istio_tcp_received_bytes_total
*** only used by metrics
** destination_canonical_service
** destination_service_name
** destination_service_namespace
** destination_workload
** destination_workload_namespace
** grpc_response_status
*** only used when request_protocol="grpc"
** request_operation
*** only used when request classification is configured
*** "request_operation" is the default attribute, it is configurable
** reporter
*** both "source" and "destination" metrics are used by Kiali
** request_protocol
** response_code
** source_canonical_service
** source_workload
** source_workload_namespace

* istio_tcp_sent_bytes_total
** destination_canonical_revision
** destination_canonical_service
** destination_service
** destination_service_name
** destination_service_namespace
** destination_workload
** destination_workload_namespace
*** only when request_protocol="grpc"
** reporter
*** both "source" and "destination" metrics are used by Kiali
** response_flags
** source_canonical_revision
** source_canonical_service
** source_workload
** source_workload_namespace


